<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ë³¸ ì¹´ì¹´ì˜¤ í…ŒìŠ¤íŠ¸</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; line-height: 1.6; }
        .step { margin: 20px 0; padding: 15px; border: 1px solid #ddd; background: #f9f9f9; }
        .result { margin: 10px 0; padding: 10px; background: #fff; border-left: 4px solid #007cba; }
        .error { border-left-color: #dc3545; background: #f8d7da; }
        .success { border-left-color: #28a745; background: #d4edda; }
        button { padding: 8px 16px; margin: 5px; cursor: pointer; background: #007cba; color: white; border: none; border-radius: 4px; }
        pre { background: #f4f4f4; padding: 10px; overflow-x: auto; white-space: pre-wrap; }
    </style>
</head>
<body>
    <h1>ğŸ” ê¸°ë³¸ ì¹´ì¹´ì˜¤ SDK ì§„ë‹¨</h1>
    
    <div class="step">
        <h3>1ë‹¨ê³„: í˜„ì¬ í˜ì´ì§€ ì •ë³´</h3>
        <div id="pageInfo"></div>
    </div>
    
    <div class="step">
        <h3>2ë‹¨ê³„: ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸</h3>
        <button onclick="checkNetwork()">ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸</button>
        <div id="networkResult" class="result"></div>
    </div>
    
    <div class="step">
        <h3>3ë‹¨ê³„: SDK ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ìƒíƒœ</h3>
        <button onclick="checkSDKScript()">ìŠ¤í¬ë¦½íŠ¸ í™•ì¸</button>
        <div id="scriptResult" class="result"></div>
    </div>
    
    <div class="step">
        <h3>4ë‹¨ê³„: window.Kakao ê°ì²´ í™•ì¸</h3>
        <button onclick="checkKakaoObject()">Kakao ê°ì²´ í™•ì¸</button>
        <div id="kakaoResult" class="result"></div>
    </div>
    
    <div class="step">
        <h3>5ë‹¨ê³„: ìˆ˜ë™ SDK ë¡œë“œ</h3>
        <button onclick="loadKakaoManually()">ìˆ˜ë™ ë¡œë“œ</button>
        <div id="manualResult" class="result"></div>
    </div>
    
    <div class="step">
        <h3>6ë‹¨ê³„: ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testInit()">ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸</button>
        <div id="initResult" class="result"></div>
    </div>
    
    <div class="step">
        <h3>7ë‹¨ê³„: ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</h3>
        <button onclick="testLogin()">ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸</button>
        <div id="loginResult" class="result"></div>
    </div>

    <!-- ì¹´ì¹´ì˜¤ SDK (ê¸°ë³¸ ë°©ì‹) -->
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js" 
            integrity="sha384-TiCUE00h649CAMonG018J2ujOgDKW/kVWlChEuu4jK2vxfAAD0eZxzCKakxg55G4" 
            crossorigin="anonymous"></script>

    <script>
        const APP_KEY = 'bf189a93b43b3653b58f19ab40ef6a07';
        
        // 1ë‹¨ê³„: í˜ì´ì§€ ì •ë³´ í‘œì‹œ
        window.onload = function() {
            const info = {
                URL: window.location.href,
                Protocol: window.location.protocol,
                Host: window.location.host,
                UserAgent: navigator.userAgent.substring(0, 100) + '...',
                CookiesEnabled: navigator.cookieEnabled,
                LocalStorageAvailable: !!window.localStorage
            };
            
            document.getElementById('pageInfo').innerHTML = '<pre>' + JSON.stringify(info, null, 2) + '</pre>';
        };
        
        // 2ë‹¨ê³„: ë„¤íŠ¸ì›Œí¬ í™•ì¸
        async function checkNetwork() {
            const result = document.getElementById('networkResult');
            result.innerHTML = 'ğŸ”„ ë„¤íŠ¸ì›Œí¬ í…ŒìŠ¤íŠ¸ ì¤‘...';
            result.className = 'result';
            
            const tests = [
                'https://www.google.com/favicon.ico',
                'https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js',
                'https://developers.kakao.com/favicon.ico'
            ];
            
            const results = [];
            
            for (const url of tests) {
                try {
                    const start = Date.now();
                    const response = await fetch(url, { 
                        method: 'HEAD', 
                        mode: 'no-cors',
                        cache: 'no-cache'
                    });
                    const time = Date.now() - start;
                    results.push(`âœ… ${url.split('/')[2]}: ${time}ms`);
                } catch (error) {
                    results.push(`âŒ ${url.split('/')[2]}: ${error.message}`);
                }
            }
            
            result.innerHTML = '<pre>' + results.join('\n') + '</pre>';
            result.className = 'result success';
        }
        
        // 3ë‹¨ê³„: SDK ìŠ¤í¬ë¦½íŠ¸ í™•ì¸
        function checkSDKScript() {
            const result = document.getElementById('scriptResult');
            
            const scripts = Array.from(document.scripts);
            const kakaoScripts = scripts.filter(s => s.src.includes('kakao'));
            
            const info = {
                totalScripts: scripts.length,
                kakaoScripts: kakaoScripts.length,
                kakaoSrc: kakaoScripts.map(s => s.src),
                kakaoLoaded: kakaoScripts.map(s => ({
                    src: s.src,
                    loaded: s.readyState === 'complete' || s.readyState === 'loaded' || s.readyState === '',
                    readyState: s.readyState
                }))
            };
            
            result.innerHTML = '<pre>' + JSON.stringify(info, null, 2) + '</pre>';
            result.className = 'result success';
        }
        
        // 4ë‹¨ê³„: Kakao ê°ì²´ í™•ì¸
        function checkKakaoObject() {
            const result = document.getElementById('kakaoResult');
            
            try {
                const info = {
                    windowKakaoExists: !!window.Kakao,
                    kakaoType: typeof window.Kakao,
                    kakaoKeys: window.Kakao ? Object.keys(window.Kakao).sort() : [],
                    hasAuth: !!(window.Kakao && window.Kakao.Auth),
                    authType: window.Kakao && window.Kakao.Auth ? typeof window.Kakao.Auth : 'undefined',
                    authKeys: window.Kakao && window.Kakao.Auth ? Object.keys(window.Kakao.Auth).sort() : [],
                    hasLoginFunction: !!(window.Kakao && window.Kakao.Auth && window.Kakao.Auth.login),
                    loginType: window.Kakao && window.Kakao.Auth ? typeof window.Kakao.Auth.login : 'undefined',
                    hasAPI: !!(window.Kakao && window.Kakao.API),
                    hasInit: !!(window.Kakao && window.Kakao.init),
                    version: window.Kakao ? window.Kakao.VERSION : 'undefined'
                };
                
                result.innerHTML = '<pre>' + JSON.stringify(info, null, 2) + '</pre>';
                
                if (info.windowKakaoExists && info.hasAuth && info.hasLoginFunction) {
                    result.className = 'result success';
                } else {
                    result.className = 'result error';
                }
                
            } catch (error) {
                result.innerHTML = '<pre>ì˜¤ë¥˜: ' + error.message + '</pre>';
                result.className = 'result error';
            }
        }
        
        // 5ë‹¨ê³„: ìˆ˜ë™ SDK ë¡œë“œ
        function loadKakaoManually() {
            const result = document.getElementById('manualResult');
            result.innerHTML = 'ğŸ”„ ìˆ˜ë™ ë¡œë“œ ì¤‘...';
            result.className = 'result';
            
            // ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ì œê±°
            const existingScripts = document.querySelectorAll('script[src*="kakao"]');
            existingScripts.forEach(script => script.remove());
            
            // ìƒˆ ìŠ¤í¬ë¦½íŠ¸ ìƒì„±
            const script = document.createElement('script');
            script.src = 'https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js';
            script.crossOrigin = 'anonymous';
            
            script.onload = function() {
                result.innerHTML = 'âœ… SDK ìˆ˜ë™ ë¡œë“œ ì„±ê³µ';
                result.className = 'result success';
                
                // 5ì´ˆ í›„ ê°ì²´ í™•ì¸
                setTimeout(() => {
                    checkKakaoObject();
                }, 1000);
            };
            
            script.onerror = function(error) {
                result.innerHTML = 'âŒ SDK ìˆ˜ë™ ë¡œë“œ ì‹¤íŒ¨: ' + error;
                result.className = 'result error';
            };
            
            document.head.appendChild(script);
        }
        
        // 6ë‹¨ê³„: ì´ˆê¸°í™” í…ŒìŠ¤íŠ¸
        function testInit() {
            const result = document.getElementById('initResult');
            
            if (!window.Kakao) {
                result.innerHTML = 'âŒ window.Kakaoê°€ ì—†ìŠµë‹ˆë‹¤. ë¨¼ì € SDKë¥¼ ë¡œë“œí•˜ì„¸ìš”.';
                result.className = 'result error';
                return;
            }
            
            try {
                window.Kakao.init(APP_KEY);
                
                const info = {
                    initSuccess: true,
                    appKey: APP_KEY,
                    isInitialized: window.Kakao.isInitialized ? window.Kakao.isInitialized() : 'function not available'
                };
                
                result.innerHTML = '<pre>' + JSON.stringify(info, null, 2) + '</pre>';
                result.className = 'result success';
                
            } catch (error) {
                result.innerHTML = 'âŒ ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message;
                result.className = 'result error';
            }
        }
        
        // 7ë‹¨ê³„: ë¡œê·¸ì¸ í…ŒìŠ¤íŠ¸
        function testLogin() {
            const result = document.getElementById('loginResult');
            
            if (!window.Kakao || !window.Kakao.Auth) {
                result.innerHTML = 'âŒ Kakao.Authê°€ ì—†ìŠµë‹ˆë‹¤.';
                result.className = 'result error';
                return;
            }
            
            if (typeof window.Kakao.Auth.login !== 'function') {
                result.innerHTML = 'âŒ Kakao.Auth.loginì´ í•¨ìˆ˜ê°€ ì•„ë‹™ë‹ˆë‹¤. íƒ€ì…: ' + typeof window.Kakao.Auth.login;
                result.className = 'result error';
                return;
            }
            
            try {
                result.innerHTML = 'ğŸ”„ ë¡œê·¸ì¸ ì‹œë„ ì¤‘...';
                result.className = 'result';
                
                window.Kakao.Auth.login({
                    success: function(response) {
                        result.innerHTML = 'âœ… ë¡œê·¸ì¸ ì„±ê³µ!\n<pre>' + JSON.stringify(response, null, 2) + '</pre>';
                        result.className = 'result success';
                    },
                    fail: function(error) {
                        result.innerHTML = 'âŒ ë¡œê·¸ì¸ ì‹¤íŒ¨:\n<pre>' + JSON.stringify(error, null, 2) + '</pre>';
                        result.className = 'result error';
                    }
                });
            } catch (error) {
                result.innerHTML = 'âŒ ë¡œê·¸ì¸ í˜¸ì¶œ ì‹¤íŒ¨: ' + error.message;
                result.className = 'result error';
            }
        }
        
        // ì „ì—­ ì˜¤ë¥˜ ìºì²˜
        window.onerror = function(message, source, lineno, colno, error) {
            console.error('ì „ì—­ ì˜¤ë¥˜:', { message, source, lineno, colno, error });
            return false;
        };
        
        // Promise ê±°ë¶€ ì˜¤ë¥˜ ìºì²˜
        window.addEventListener('unhandledrejection', function(event) {
            console.error('ì²˜ë¦¬ë˜ì§€ ì•Šì€ Promise ê±°ë¶€:', event.reason);
        });
    </script>
</body>
</html> 